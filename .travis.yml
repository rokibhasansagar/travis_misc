os: linux
dist: bionic
language: python
python:
  - "3.7"
addons:
  apt:
    update: true
sudo: required
git:
  depth: 1
install: pip3 install git-filter-repo
script:
  - git config --global user.name "rokibhasansagar"
  - git config --global user.email "rokibhasansagar2014@outlook.com"
  - git clone https://github.com/rokibhasansagar/vendor_pb_single.git -b pb --single-branch
  - cd vendor_pb_single
  - git remote add omni https://github.com/omnirom/android_vendor_omni
  - git log --oneline --graph -n 5
  - git pull -q --progress --no-ff -X ours --no-allow-unrelated-histories omni android-9.0
  - git log --oneline --graph -n 50
  - git push -f -u https://$GitOAUTHToken@github.com/rokibhasansagar/vendor_pb_single.git HEAD:no-ff
